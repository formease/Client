(()=>{var ti=Object.create;var xe=Object.defineProperty;var ni=Object.getOwnPropertyDescriptor;var ii=Object.getOwnPropertyNames;var ri=Object.getPrototypeOf,si=Object.prototype.hasOwnProperty;var ai=n=>xe(n,"__esModule",{value:!0});var oi=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var ci=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of ii(e))!si.call(n,r)&&(t||r!=="default")&&xe(n,r,{get:()=>e[r],enumerable:!(i=ni(e,r))||i.enumerable});return n},ui=(n,e)=>ci(ai(xe(n!=null?ti(ri(n)):{},"default",!e&&n&&n.__esModule?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n);var sn=oi((aa,ye)=>{var xt,Vt,Wt,jt,Ht,Bt,zt,$t,qt,Ie,qe,Gt,Kt,Jt,ee,Yt,Xt,Qt,Zt,en,tn,nn,rn,ve;(function(n){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(i){n(t(e,t(i)))}):typeof ye=="object"&&typeof ye.exports=="object"?n(t(e,t(ye.exports))):n(t(e));function t(i,r){return i!==e&&(typeof Object.create=="function"?Object.defineProperty(i,"__esModule",{value:!0}):i.__esModule=!0),function(s,a){return i[s]=r?r(s,a):a}}})(function(n){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])};xt=function(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(i,r);function s(){this.constructor=i}i.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)},Vt=Object.assign||function(i){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(i[c]=r[c])}return i},Wt=function(i,r){var s={};for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&r.indexOf(a)<0&&(s[a]=i[a]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(i);c<a.length;c++)r.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(i,a[c])&&(s[a[c]]=i[a[c]]);return s},jt=function(i,r,s,a){var c=arguments.length,o=c<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,r,s,a);else for(var h=i.length-1;h>=0;h--)(u=i[h])&&(o=(c<3?u(o):c>3?u(r,s,o):u(r,s))||o);return c>3&&o&&Object.defineProperty(r,s,o),o},Ht=function(i,r){return function(s,a){r(s,a,i)}},Bt=function(i,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,r)},zt=function(i,r,s,a){function c(o){return o instanceof s?o:new s(function(u){u(o)})}return new(s||(s=Promise))(function(o,u){function h(m){try{l(a.next(m))}catch(I){u(I)}}function f(m){try{l(a.throw(m))}catch(I){u(I)}}function l(m){m.done?o(m.value):c(m.value).then(h,f)}l((a=a.apply(i,r||[])).next())})},$t=function(i,r){var s={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},a,c,o,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(l){return function(m){return f([l,m])}}function f(l){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,c&&(o=l[0]&2?c.return:l[0]?c.throw||((o=c.return)&&o.call(c),0):c.next)&&!(o=o.call(c,l[1])).done)return o;switch(c=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,c=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){s=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){s.label=l[1];break}if(l[0]===6&&s.label<o[1]){s.label=o[1],o=l;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(l);break}o[2]&&s.ops.pop(),s.trys.pop();continue}l=r.call(i,s)}catch(m){l=[6,m],c=0}finally{a=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},qt=function(i,r){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(r,s)&&ve(r,i,s)},ve=Object.create?function(i,r,s,a){a===void 0&&(a=s),Object.defineProperty(i,a,{enumerable:!0,get:function(){return r[s]}})}:function(i,r,s,a){a===void 0&&(a=s),i[a]=r[s]},Ie=function(i){var r=typeof Symbol=="function"&&Symbol.iterator,s=r&&i[r],a=0;if(s)return s.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&a>=i.length&&(i=void 0),{value:i&&i[a++],done:!i}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},qe=function(i,r){var s=typeof Symbol=="function"&&i[Symbol.iterator];if(!s)return i;var a=s.call(i),c,o=[],u;try{for(;(r===void 0||r-- >0)&&!(c=a.next()).done;)o.push(c.value)}catch(h){u={error:h}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(u)throw u.error}}return o},Gt=function(){for(var i=[],r=0;r<arguments.length;r++)i=i.concat(qe(arguments[r]));return i},Kt=function(){for(var i=0,r=0,s=arguments.length;r<s;r++)i+=arguments[r].length;for(var a=Array(i),c=0,r=0;r<s;r++)for(var o=arguments[r],u=0,h=o.length;u<h;u++,c++)a[c]=o[u];return a},Jt=function(i,r,s){if(s||arguments.length===2)for(var a=0,c=r.length,o;a<c;a++)(o||!(a in r))&&(o||(o=Array.prototype.slice.call(r,0,a)),o[a]=r[a]);return i.concat(o||Array.prototype.slice.call(r))},ee=function(i){return this instanceof ee?(this.v=i,this):new ee(i)},Yt=function(i,r,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(i,r||[]),c,o=[];return c={},u("next"),u("throw"),u("return"),c[Symbol.asyncIterator]=function(){return this},c;function u(_){a[_]&&(c[_]=function(E){return new Promise(function(J,me){o.push([_,E,J,me])>1||h(_,E)})})}function h(_,E){try{f(a[_](E))}catch(J){I(o[0][3],J)}}function f(_){_.value instanceof ee?Promise.resolve(_.value.v).then(l,m):I(o[0][2],_)}function l(_){h("next",_)}function m(_){h("throw",_)}function I(_,E){_(E),o.shift(),o.length&&h(o[0][0],o[0][1])}},Xt=function(i){var r,s;return r={},a("next"),a("throw",function(c){throw c}),a("return"),r[Symbol.iterator]=function(){return this},r;function a(c,o){r[c]=i[c]?function(u){return(s=!s)?{value:ee(i[c](u)),done:c==="return"}:o?o(u):u}:o}},Qt=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=i[Symbol.asyncIterator],s;return r?r.call(i):(i=typeof Ie=="function"?Ie(i):i[Symbol.iterator](),s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s);function a(o){s[o]=i[o]&&function(u){return new Promise(function(h,f){u=i[o](u),c(h,f,u.done,u.value)})}}function c(o,u,h,f){Promise.resolve(f).then(function(l){o({value:l,done:h})},u)}},Zt=function(i,r){return Object.defineProperty?Object.defineProperty(i,"raw",{value:r}):i.raw=r,i};var t=Object.create?function(i,r){Object.defineProperty(i,"default",{enumerable:!0,value:r})}:function(i,r){i.default=r};en=function(i){if(i&&i.__esModule)return i;var r={};if(i!=null)for(var s in i)s!=="default"&&Object.prototype.hasOwnProperty.call(i,s)&&ve(r,i,s);return t(r,i),r},tn=function(i){return i&&i.__esModule?i:{default:i}},nn=function(i,r,s,a){if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?i!==r||!a:!r.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?a:s==="a"?a.call(i):a?a.value:r.get(i)},rn=function(i,r,s,a,c){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!c)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?i!==r||!c:!r.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?c.call(i,s):c?c.value=s:r.set(i,s),s},n("__extends",xt),n("__assign",Vt),n("__rest",Wt),n("__decorate",jt),n("__param",Ht),n("__metadata",Bt),n("__awaiter",zt),n("__generator",$t),n("__exportStar",qt),n("__createBinding",ve),n("__values",Ie),n("__read",qe),n("__spread",Gt),n("__spreadArrays",Kt),n("__spreadArray",Jt),n("__await",ee),n("__asyncGenerator",Yt),n("__asyncDelegator",Xt),n("__asyncValues",Qt),n("__makeTemplateObject",Zt),n("__importStar",en),n("__importDefault",tn),n("__classPrivateFieldGet",nn),n("__classPrivateFieldSet",rn)})});var li=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},di=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],a=n[t++],c=n[t++],o=((r&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(o>>10)),e[i++]=String.fromCharCode(56320+(o&1023))}else{let s=n[t++],a=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},hi={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],a=r+1<n.length,c=a?n[r+1]:0,o=r+2<n.length,u=o?n[r+2]:0,h=s>>2,f=(s&3)<<4|c>>4,l=(c&15)<<2|u>>6,m=u&63;o||(m=64,a||(l=64)),i.push(t[h],t[f],t[l],t[m])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(li(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):di(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],c=r<n.length?t[n.charAt(r)]:0;++r;let u=r<n.length?t[n.charAt(r)]:64;++r;let f=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||c==null||u==null||f==null)throw Error();let l=s<<2|c>>4;if(i.push(l),u!==64){let m=c<<4&240|u>>2;if(i.push(m),f!==64){let I=u<<6&192|f;i.push(I)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};var wt=function(n){try{return hi.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};var We=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function g(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function At(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function St(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Rt(){let n=g();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}var fi="FirebaseError",N=class extends Error{constructor(e,t,i){super(t);this.code=e,this.customData=i,this.name=fi,Object.setPrototypeOf(this,N.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,L.prototype.create)}},L=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?pi(s,i):"Error",c=`${this.serviceName}: ${a} (${r}).`;return new N(r,c,i)}};function pi(n,e){return n.replace(mi,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var mi=/\{\$([^}]+)}/g;function Ot(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Y(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let s=n[r],a=e[r];if(Tt(s)&&Tt(a)){if(!Y(s,a))return!1}else if(s!==a)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function Tt(n){return n!==null&&typeof n=="object"}function X(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Q(n){let e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){let[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Z(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function kt(n,e){let t=new Nt(n,e);return t.subscribe.bind(t)}var Nt=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");_i(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Ve),r.error===void 0&&(r.error=Ve),r.complete===void 0&&(r.complete=Ve);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function _i(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ve(){}var $s=4*60*60*1e3;function B(n){return n&&n._delegate?n._delegate:n}var M=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var z="[DEFAULT]";var Pt=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new We;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ii(e))try{this.getOrInitializeService({instanceIdentifier:z})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=z){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=z){return this.instances.has(e)}getOptions(e=z){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[s,a]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);i===c&&a.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(!!i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:gi(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=z){return this.component?this.component.multipleInstances?e:z:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function gi(n){return n===z?void 0:n}function Ii(n){return n.instantiationMode==="EAGER"}var je=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Pt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var vi=[],p;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(p||(p={}));var yi={debug:p.DEBUG,verbose:p.VERBOSE,info:p.INFO,warn:p.WARN,error:p.ERROR,silent:p.SILENT},Ei=p.INFO,Ti={[p.DEBUG]:"log",[p.VERBOSE]:"log",[p.INFO]:"info",[p.WARN]:"warn",[p.ERROR]:"error"},wi=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=Ti[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},oe=class{constructor(e){this.name=e,this._logLevel=Ei,this._logHandler=wi,this._userLogHandler=null,vi.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in p))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yi[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,p.DEBUG,...e),this._logHandler(this,p.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,p.VERBOSE,...e),this._logHandler(this,p.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,p.INFO,...e),this._logHandler(this,p.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,p.WARN,...e),this._logHandler(this,p.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,p.ERROR,...e),this._logHandler(this,p.ERROR,...e)}};var Ct=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(bi(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function bi(n){let e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}var He="@firebase/app",Dt="0.7.16";var ze=new oe("@firebase/app"),Ai="@firebase/app-compat",Si="@firebase/analytics-compat",Ri="@firebase/analytics",Oi="@firebase/app-check-compat",ki="@firebase/app-check",Ni="@firebase/auth",Pi="@firebase/auth-compat",Di="@firebase/database",Ci="@firebase/database-compat",Li="@firebase/functions",Mi="@firebase/functions-compat",Ui="@firebase/installations",Fi="@firebase/installations-compat",xi="@firebase/messaging",Vi="@firebase/messaging-compat",Wi="@firebase/performance",ji="@firebase/performance-compat",Hi="@firebase/remote-config",Bi="@firebase/remote-config-compat",zi="@firebase/storage",$i="@firebase/storage-compat",qi="@firebase/firestore",Gi="@firebase/firestore-compat",Ki="firebase",Ji="9.6.6";var Lt="[DEFAULT]",Yi={[He]:"fire-core",[Ai]:"fire-core-compat",[Ri]:"fire-analytics",[Si]:"fire-analytics-compat",[ki]:"fire-app-check",[Oi]:"fire-app-check-compat",[Ni]:"fire-auth",[Pi]:"fire-auth-compat",[Di]:"fire-rtdb",[Ci]:"fire-rtdb-compat",[Li]:"fire-fn",[Mi]:"fire-fn-compat",[Ui]:"fire-iid",[Fi]:"fire-iid-compat",[xi]:"fire-fcm",[Vi]:"fire-fcm-compat",[Wi]:"fire-perf",[ji]:"fire-perf-compat",[Hi]:"fire-rc",[Bi]:"fire-rc-compat",[zi]:"fire-gcs",[$i]:"fire-gcs-compat",[qi]:"fire-fst",[Gi]:"fire-fst-compat","fire-js":"fire-js",[Ki]:"fire-js-all"};var _e=new Map,Be=new Map;function Xi(n,e){try{n.container.addComponent(e)}catch(t){ze.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ce(n){let e=n.name;if(Be.has(e))return ze.debug(`There were multiple attempts to register component ${e}.`),!1;Be.set(e,n);for(let t of _e.values())Xi(t,n);return!0}function $e(n,e){return n.container.getProvider(e)}var Qi={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function."},ge=new L("app","Firebase",Qi);var Mt=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new M("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ge.create("app-deleted",{appName:this._name})}};var ue=Ji;function Ut(n,e={}){typeof e!="object"&&(e={name:e});let t=Object.assign({name:Lt,automaticDataCollectionEnabled:!1},e),i=t.name;if(typeof i!="string"||!i)throw ge.create("bad-app-name",{appName:String(i)});let r=_e.get(i);if(r){if(Y(n,r.options)&&Y(t,r.config))return r;throw ge.create("duplicate-app",{appName:i})}let s=new je(i);for(let c of Be.values())s.addComponent(c);let a=new Mt(n,t,s);return _e.set(i,a),a}function Ft(n=Lt){let e=_e.get(n);if(!e)throw ge.create("no-app",{appName:n});return e}function U(n,e,t){var i;let r=(i=Yi[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){let c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ze.warn(c.join(" "));return}ce(new M(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function Zi(n){ce(new M("platform-logger",e=>new Ct(e),"PRIVATE")),U(He,Dt,n),U(He,Dt,"esm2017"),U("fire-js","")}Zi("");var er="firebase",tr="9.6.6";U(er,tr,"app");var an=ui(sn(),1),{__extends:oa,__assign:ca,__rest:Ee,__decorate:ua,__param:la,__metadata:da,__awaiter:ha,__generator:fa,__exportStar:pa,__createBinding:ma,__values:_a,__read:ga,__spread:Ia,__spreadArrays:va,__spreadArray:ya,__await:Ea,__asyncGenerator:Ta,__asyncDelegator:wa,__asyncValues:ba,__makeTemplateObject:Aa,__importStar:Sa,__importDefault:Ra,__classPrivateFieldGet:Oa,__classPrivateFieldSet:ka}=an.default;function vn(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var yn=vn,En=new L("auth","Firebase",vn());var on=new oe("@firebase/auth");function Te(n,...e){on.logLevel<=p.ERROR&&on.error(`Auth (${ue}): ${n}`,...e)}function y(n,...e){throw tt(n,...e)}function R(n,...e){return tt(n,...e)}function nr(n,e,t){let i=Object.assign(Object.assign({},yn()),{[e]:t});return new L("auth","Firebase",i).create(e,{appName:n.name})}function tt(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return En.create(n,...e)}function d(n,e,...t){if(!n)throw tt(e,...t)}function S(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Te(e),new Error(e)}function D(n,e){n||S(e)}var cn=new Map;function P(n){D(n instanceof Function,"Expected a class definition");let e=cn.get(n);return e?(D(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,cn.set(n,e),e)}function Tn(n,e){let t=$e(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(Y(s,e??{}))return r;y(r,"already-initialized")}return t.initialize({options:e})}function ir(n,e){let t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(P);(e==null?void 0:e.errorMap)&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Ye(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function rr(){return un()==="http:"||un()==="https:"}function un(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function sr(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rr()||At()||"connection"in navigator)?navigator.onLine:!0}function ar(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ie=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,D(t>e,"Short delay should be less than long delay!"),this.isMobile=bt()||St()}get(){return sr()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function nt(n,e){D(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var it=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;S("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;S("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;S("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var or={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};var cr=new ie(3e4,6e4);function v(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function k(n,e,t,i,r={}){return wn(n,r,async()=>{let s={},a={};i&&(e==="GET"?a=i:s={body:JSON.stringify(i)});let c=X(Object.assign({key:n.config.apiKey},a)).slice(1),o=await n._getAdditionalHeaders();return o["Content-Type"]="application/json",n.languageCode&&(o["X-Firebase-Locale"]=n.languageCode),it.fetch()(bn(n,n.config.apiHost,t,c),Object.assign({method:e,headers:o,referrerPolicy:"no-referrer"},s))})}async function wn(n,e,t){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},or),e);try{let r=new An(n),s=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();let a=await s.json();if("needConfirmation"in a)throw we(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{let c=s.ok?a.errorMessage:a.error.message,[o,u]=c.split(" : ");if(o==="FEDERATED_USER_ID_ALREADY_LINKED")throw we(n,"credential-already-in-use",a);if(o==="EMAIL_EXISTS")throw we(n,"email-already-in-use",a);let h=i[o]||o.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw nr(n,h,u);y(n,h)}}catch(r){if(r instanceof N)throw r;y(n,"network-request-failed")}}async function H(n,e,t,i,r={}){let s=await k(n,e,t,i,r);return"mfaPendingCredential"in s&&y(n,"multi-factor-auth-required",{_serverResponse:s}),s}function bn(n,e,t,i){let r=`${e}${t}?${i}`;return n.config.emulator?nt(n.config,r):`${n.config.apiScheme}://${r}`}var An=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(R(this.auth,"network-request-failed")),cr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function we(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=R(n,e,i);return r.customData._tokenResponse=t,r}async function ur(n,e){return k(n,"POST","/v1/accounts:delete",e)}async function lr(n,e){return k(n,"POST","/v1/accounts:lookup",e)}function le(n){if(!!n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Sn(n,e=!1){let t=B(n),i=await t.getIdToken(e),r=rt(i);d(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:le(Ge(r.auth_time)),issuedAtTime:le(Ge(r.iat)),expirationTime:le(Ge(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Ge(n){return Number(n)*1e3}function rt(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Te("JWT malformed, contained fewer than 3 sections"),null;try{let r=wt(t);return r?JSON.parse(r):(Te("Failed to decode base64 JWT payload"),null)}catch(r){return Te("Caught error parsing JWT payload as JSON",r),null}}function dr(n){let e=rt(n);return d(e,"internal-error"),d(typeof e.exp<"u","internal-error"),d(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function de(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof N&&hr(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function hr({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Rn=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var st=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=le(this.lastLoginAt),this.creationTime=le(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Se(n){var e;let t=n.auth,i=await n.getIdToken(),r=await de(n,lr(t,{idToken:i}));d(r==null?void 0:r.users.length,t,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let a=((e=s.providerUserInfo)===null||e===void 0?void 0:e.length)?pr(s.providerUserInfo):[],c=fr(n.providerData,a),o=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!(c==null?void 0:c.length),h=o?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new st(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,f)}async function On(n){let e=B(n);await Se(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fr(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function pr(n){return n.map(e=>{var{providerId:t}=e,i=Ee(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}async function mr(n,e){let t=await wn(n,{},async()=>{let i=X({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,a=bn(n,r,"/v1/token",`key=${s}`),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",it.fetch()(a,{method:"POST",headers:c,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}var ne=class{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){d(e.idToken,"internal-error"),d(typeof e.idToken<"u","internal-error"),d(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return d(!this.accessToken||this.refreshToken,e,"user-token-expired"),!t&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:i,refreshToken:r,expiresIn:s}=await mr(e,t);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,a=new ne;return i&&(d(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(d(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(d(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ne,this.toJSON())}_performRefresh(){return S("not implemented")}};function F(n,e){d(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var x=class{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=Ee(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new st(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await de(this,this.stsTokenManager.getToken(this.auth,e));return d(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Sn(this,e)}reload(){return On(this)}_assign(e){this!==e&&(d(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new x(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){d(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Se(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){let e=await this.getIdToken();return await de(this,ur(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,a,c,o,u,h;let f=(i=t.displayName)!==null&&i!==void 0?i:void 0,l=(r=t.email)!==null&&r!==void 0?r:void 0,m=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,I=(a=t.photoURL)!==null&&a!==void 0?a:void 0,_=(c=t.tenantId)!==null&&c!==void 0?c:void 0,E=(o=t._redirectEventId)!==null&&o!==void 0?o:void 0,J=(u=t.createdAt)!==null&&u!==void 0?u:void 0,me=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Me,emailVerified:vt,isAnonymous:yt,providerData:Ue,stsTokenManager:Et}=t;d(Me&&Et,e,"internal-error");let Zn=ne.fromJSON(this.name,Et);d(typeof Me=="string",e,"internal-error"),F(f,e.name),F(l,e.name),d(typeof vt=="boolean",e,"internal-error"),d(typeof yt=="boolean",e,"internal-error"),F(m,e.name),F(I,e.name),F(_,e.name),F(E,e.name),F(J,e.name),F(me,e.name);let Fe=new x({uid:Me,auth:e,email:l,emailVerified:vt,displayName:f,isAnonymous:yt,photoURL:I,phoneNumber:m,tenantId:_,stsTokenManager:Zn,createdAt:J,lastLoginAt:me});return Ue&&Array.isArray(Ue)&&(Fe.providerData=Ue.map(ei=>Object.assign({},ei))),E&&(Fe._redirectEventId=E),Fe}static async _fromIdTokenResponse(e,t,i=!1){let r=new ne;r.updateFromServerResponse(t);let s=new x({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Se(s),s}};var at=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}};at.type="NONE";var Xe=at;function be(n,e,t){return`firebase:${n}:${e}:${t}`}var q=class{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=be(this.userKey,r.apiKey,s),this.fullPersistenceKey=be("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);return e?x._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new q(P(Xe),e,i);let r=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u),s=r[0]||P(Xe),a=be(i,e.config.apiKey,e.name),c=null;for(let u of t)try{let h=await u._get(a);if(h){let f=x._fromJSON(e,h);u!==s&&(c=f),s=u;break}}catch{}let o=r.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!o.length?new q(s,e,i):(s=o[0],c&&await s._set(a,c.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new q(s,e,i))}};function ln(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Pn(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kn(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Cn(e))return"Blackberry";if(Ln(e))return"Webos";if(ot(e))return"Safari";if((e.includes("chrome/")||Nn(e))&&!e.includes("edge/"))return"Chrome";if(Dn(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function kn(n=g()){return/firefox\//i.test(n)}function ot(n=g()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Nn(n=g()){return/crios\//i.test(n)}function Pn(n=g()){return/iemobile/i.test(n)}function Dn(n=g()){return/android/i.test(n)}function Cn(n=g()){return/blackberry/i.test(n)}function Ln(n=g()){return/webos/i.test(n)}function ke(n=g()){return/iphone|ipad|ipod/i.test(n)}function _r(n=g()){var e;return ke(n)&&!!((e=window.navigator)===null||e===void 0?void 0:e.standalone)}function gr(){return Rt()&&document.documentMode===10}function Mn(n=g()){return ke(n)||Dn(n)||Ln(n)||Cn(n)||/windows phone/i.test(n)||Pn(n)}function Ir(){try{return!!(window&&window!==window.top)}catch{return!1}}function Un(n,e=[]){let t;switch(n){case"Browser":t=ln(g());break;case"Worker":t=`${ln(g())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ue}/${i}`}var Fn=class{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qe(this),this.idTokenSubscription=new Qe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=En,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=P(t)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await q.create(this,e),!this._deleted)){if((i=this._popupRedirectResolver)===null||i===void 0?void 0:i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e)}}async initializeCurrentUser(e){var t;let i=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let r=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,s=i==null?void 0:i._redirectEventId,a=await this.tryRedirectSignIn(e);(!r||r===s)&&(a==null?void 0:a.user)&&(i=a.user)}return i?i._redirectEventId?(d(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)):this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Se(e)}catch(t){if(t.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ar()}async _delete(){this._deleted=!0}async updateCurrentUser(e){let t=e?B(e):null;return t&&d(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&d(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(P(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new L("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&P(e)||this._popupRedirectResolver;d(t,this,"argument-error"),this.redirectPersistenceManager=await q.create(this,[P(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),a=this._isInitialized?Promise.resolve():this._initializationPromise;return d(a,this,"internal-error"),a.then(()=>s(this.currentUser)),typeof t=="function"?e.addObserver(t,i,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return d(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Un(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={["X-Client-Version"]:this.clientVersion};return this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId),e}};function Ne(n){return B(n)}var Qe=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=kt(t=>this.observer=t)}get next(){return d(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var re=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return S("not implemented")}_getIdTokenResponse(e){return S("not implemented")}_linkToIdToken(e,t){return S("not implemented")}_getReauthenticationResolver(e){return S("not implemented")}};async function vr(n,e){return k(n,"POST","/v1/accounts:update",e)}async function yr(n,e){return H(n,"POST","/v1/accounts:signInWithPassword",v(n,e))}async function Er(n,e){return H(n,"POST","/v1/accounts:signInWithEmailLink",v(n,e))}async function Tr(n,e){return H(n,"POST","/v1/accounts:signInWithEmailLink",v(n,e))}var G=class extends re{constructor(e,t,i,r=null){super("password",i);this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new G(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new G(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if((t==null?void 0:t.email)&&(t==null?void 0:t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return yr(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Er(e,{email:this._email,oobCode:this._password});default:y(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return vr(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Tr(e,{idToken:t,email:this._email,oobCode:this._password});default:y(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function te(n,e){return H(n,"POST","/v1/accounts:signInWithIdp",v(n,e))}var wr="http://localhost",C=class extends re{constructor(){super(...arguments);this.pendingToken=null}static _fromParams(e){let t=new C(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):y("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,s=Ee(t,["providerId","signInMethod"]);if(!i||!r)return null;let a=new C(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){let t=this.buildRequest();return te(e,t)}_linkToIdToken(e,t){let i=this.buildRequest();return i.idToken=t,te(e,i)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,te(e,t)}buildRequest(){let e={requestUri:wr,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=X(t)}return e}};async function br(n,e){return k(n,"POST","/v1/accounts:sendVerificationCode",v(n,e))}async function Ar(n,e){return H(n,"POST","/v1/accounts:signInWithPhoneNumber",v(n,e))}async function Sr(n,e){let t=await H(n,"POST","/v1/accounts:signInWithPhoneNumber",v(n,e));if(t.temporaryProof)throw we(n,"account-exists-with-different-credential",t);return t}var Rr={USER_NOT_FOUND:"user-not-found"};async function Or(n,e){let t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return H(n,"POST","/v1/accounts:signInWithPhoneNumber",v(n,t),Rr)}var V=class extends re{constructor(e){super("phone","phone");this.params=e}static _fromVerification(e,t){return new V({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new V({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return Ar(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return Sr(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return Or(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:i,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:i,code:r}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));let{verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:s}=e;return!i&&!t&&!r&&!s?null:new V({verificationId:t,verificationCode:i,phoneNumber:r,temporaryProof:s})}};function kr(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Nr(n){let e=Q(Z(n)).link,t=e?Q(Z(e)).deep_link_id:null,i=Q(Z(n)).deep_link_id;return(i?Q(Z(i)).link:null)||i||t||e||n}var fe=class{constructor(e){var t,i,r,s,a,c;let o=Q(Z(e)),u=(t=o.apiKey)!==null&&t!==void 0?t:null,h=(i=o.oobCode)!==null&&i!==void 0?i:null,f=kr((r=o.mode)!==null&&r!==void 0?r:null);d(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(s=o.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=o.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=o.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){let t=Nr(e);try{return new fe(t)}catch{return null}}};var K=class{constructor(){this.providerId=K.PROVIDER_ID}static credential(e,t){return G._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let i=fe.parseLink(t);return d(i,"argument-error"),G._fromEmailAndCode(e,i.code,i.tenantId)}};K.PROVIDER_ID="password";K.EMAIL_PASSWORD_SIGN_IN_METHOD="password";K.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var ct=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var se=class extends ct{constructor(){super(...arguments);this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var T=class extends se{constructor(){super("facebook.com")}static credential(e){return C._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return T.credentialFromTaggedObject(e)}static credentialFromError(e){return T.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return T.credential(e.oauthAccessToken)}catch{return null}}};T.FACEBOOK_SIGN_IN_METHOD="facebook.com";T.PROVIDER_ID="facebook.com";var w=class extends se{constructor(){super("google.com");this.addScope("profile")}static credential(e,t){return C._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return w.credentialFromTaggedObject(e)}static credentialFromError(e){return w.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return w.credential(t,i)}catch{return null}}};w.GOOGLE_SIGN_IN_METHOD="google.com";w.PROVIDER_ID="google.com";var b=class extends se{constructor(){super("github.com")}static credential(e){return C._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return b.credentialFromTaggedObject(e)}static credentialFromError(e){return b.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return b.credential(e.oauthAccessToken)}catch{return null}}};b.GITHUB_SIGN_IN_METHOD="github.com";b.PROVIDER_ID="github.com";var A=class extends se{constructor(){super("twitter.com")}static credential(e,t){return C._fromParams({providerId:A.PROVIDER_ID,signInMethod:A.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return A.credentialFromTaggedObject(e)}static credentialFromError(e){return A.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return A.credential(t,i)}catch{return null}}};A.TWITTER_SIGN_IN_METHOD="twitter.com";A.PROVIDER_ID="twitter.com";async function Pr(n,e){return H(n,"POST","/v1/accounts:signUp",v(n,e))}var j=class{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){let s=await x._fromIdTokenResponse(e,i,r),a=dn(i);return new j({user:s,providerId:a,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);let r=dn(i);return new j({user:e,providerId:r,_tokenResponse:i,operationType:t})}};function dn(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var he=class extends N{constructor(e,t,i,r){var s;super(t.code,t.message);this.operationType=i,this.user=r,Object.setPrototypeOf(this,he.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new he(e,t,i,r)}};function xn(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?he._fromErrorAndOperation(n,s,e,i):s})}async function Dr(n,e,t=!1){let i=await de(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return j._forOperation(n,"link",i)}async function Cr(n,e,t=!1){let{auth:i}=n,r="reauthenticate";try{let s=await de(n,xn(i,r,e,n),t);d(s.idToken,i,"internal-error");let a=rt(s.idToken);d(a,i,"internal-error");let{sub:c}=a;return d(n.uid===c,i,"user-mismatch"),j._forOperation(n,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&y(i,"user-mismatch"),s}}async function Lr(n,e,t=!1){let i="signIn",r=await xn(n,i,e),s=await j._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(s.user),s}async function ut(n,e,t){let i=Ne(n),r=await Pr(i,{returnSecureToken:!0,email:e,password:t}),s=await j._fromIdTokenResponse(i,"signIn",r);return await i._updateCurrentUser(s.user),s}function lt(n,e,t,i){return B(n).onAuthStateChanged(e,t,i)}function Mr(n,e){return k(n,"POST","/v2/accounts/mfaEnrollment:start",v(n,e))}function Ur(n,e){return k(n,"POST","/v2/accounts/mfaEnrollment:finalize",v(n,e))}var Re="__sak";var dt=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Re,"1"),this.storage.removeItem(Re),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function Fr(){let n=g();return ot(n)||ke(n)}var xr=1e3,Vr=10,ht=class extends dt{constructor(){super(()=>window.localStorage,"LOCAL");this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Fr()&&Ir(),this.fallbackToPolling=Mn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,c,o)=>{this.notifyListeners(a,o)});return}let i=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!t)return}let r=()=>{let a=this.storage.getItem(i);!t&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);gr()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Vr):r()}notifyListeners(e,t){this.localCache[e]=t;let i=this.listeners[e];if(i)for(let r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},xr)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}};ht.type="LOCAL";var Vn=ht;var ft=class extends dt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}};ft.type="SESSION";var pt=ft;function Wr(n){return Promise.all(n.map(async e=>{try{let t=await e;return{fulfilled:!0,value:t}}catch(t){return{fulfilled:!1,reason:t}}}))}var pe=class{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;let i=new pe(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let t=e,{eventId:i,eventType:r,data:s}=t.data,a=this.handlersMap[r];if(!(a==null?void 0:a.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});let c=Array.from(a).map(async u=>u(t.origin,s)),o=await Wr(c);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:o})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}};pe.receivers=[];function mt(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var Wn=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((c,o)=>{let u=mt("",20);r.port1.start();let h=setTimeout(()=>{o(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(f){let l=f;if(l.data.eventId===u)switch(l.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(l.data.response);break;default:clearTimeout(h),clearTimeout(s),o(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}};function O(){return window}function jr(n){O().location.href=n}function jn(){return typeof O().WorkerGlobalScope<"u"&&typeof O().importScripts=="function"}async function Hr(){if(!(navigator==null?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Br(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function zr(){return jn()?self:null}var Hn="firebaseLocalStorageDb",$r=1,Oe="firebaseLocalStorage",Bn="fbase_key",ae=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Pe(n,e){return n.transaction([Oe],e?"readwrite":"readonly").objectStore(Oe)}function qr(){let n=indexedDB.deleteDatabase(Hn);return new ae(n).toPromise()}function Ze(){let n=indexedDB.open(Hn,$r);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(Oe,{keyPath:Bn})}catch(r){t(r)}}),n.addEventListener("success",async()=>{let i=n.result;i.objectStoreNames.contains(Oe)?e(i):(i.close(),await qr(),e(await Ze()))})})}async function hn(n,e,t){let i=Pe(n,!0).put({[Bn]:e,value:t});return new ae(i).toPromise()}async function Gr(n,e){let t=Pe(n,!1).get(e),i=await new ae(t).toPromise();return i===void 0?null:i.value}function fn(n,e){let t=Pe(n,!0).delete(e);return new ae(t).toPromise()}var Kr=800,Jr=3,_t=class{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ze(),this.db)}async _withRetries(e){let t=0;for(;;)try{let i=await this._openDb();return await e(i)}catch(i){if(t++>Jr)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jn()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pe._getInstance(zr()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Hr(),!this.activeServiceWorker)return;this.sender=new Wn(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);!i||((e=i[0])===null||e===void 0?void 0:e.fulfilled)&&((t=i[0])===null||t===void 0?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Br()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await Ze();return await hn(e,Re,"1"),await fn(e,Re),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>hn(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(i=>Gr(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>fn(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(r=>{let s=Pe(r,!1).getAll();return new ae(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];let t=[],i=new Set;for(let{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(let r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;let i=this.listeners[e];if(i)for(let r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Kr)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}};_t.type="LOCAL";var zn=_t;function Yr(n,e){return k(n,"POST","/v2/accounts/mfaSignIn:start",v(n,e))}function Xr(n,e){return k(n,"POST","/v2/accounts/mfaSignIn:finalize",v(n,e))}function Qr(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}function Zr(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=R("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",Qr().appendChild(i)})}function $n(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var Ua=$n("rcb"),Fa=new ie(3e4,6e4);var es="recaptcha";async function ts(n,e,t){var i;let r=await t.verify();try{d(typeof r=="string",n,"argument-error"),d(t.type===es,n,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){let a=s.session;if("phoneNumber"in s)return d(a.type==="enroll",n,"internal-error"),(await Mr(n,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}})).phoneSessionInfo.sessionInfo;{d(a.type==="signin",n,"internal-error");let c=((i=s.multiFactorHint)===null||i===void 0?void 0:i.uid)||s.multiFactorUid;return d(c,n,"missing-multi-factor-info"),(await Yr(n,{mfaPendingCredential:a.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:r}})).phoneResponseInfo.sessionInfo}}else{let{sessionInfo:a}=await br(n,{phoneNumber:s.phoneNumber,recaptchaToken:r});return a}}finally{t._reset()}}var W=class{constructor(e){this.providerId=W.PROVIDER_ID,this.auth=Ne(e)}verifyPhoneNumber(e,t){return ts(this.auth,e,B(t))}static credential(e,t){return V._fromVerification(e,t)}static credentialFromResult(e){let t=e;return W.credentialFromTaggedObject(t)}static credentialFromError(e){return W.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:i}=e;return t&&i?V._fromTokenResponse(t,i):null}};W.PROVIDER_ID="phone";W.PHONE_SIGN_IN_METHOD="phone";function ns(n,e){return e?P(e):(d(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var De=class extends re{constructor(e){super("custom","custom");this.params=e}_getIdTokenResponse(e){return te(e,this._buildIdpRequest())}_linkToIdToken(e,t){return te(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return te(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function is(n){return Lr(n.auth,new De(n),n.bypassAuthState)}function rs(n){let{auth:e,user:t}=n;return d(t,e,"internal-error"),Cr(t,new De(n),n.bypassAuthState)}async function ss(n){let{auth:e,user:t}=n;return d(t,e,"internal-error"),Dr(t,new De(n),n.bypassAuthState)}var gt=class{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:a,type:c}=e;if(a){this.reject(a);return}let o={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(o))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return is;case"linkViaPopup":case"linkViaRedirect":return ss;case"reauthViaPopup":case"reauthViaRedirect":return rs;default:y(this.auth,"internal-error")}}resolve(e){D(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){D(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var as=new ie(2e3,1e4);var $=class extends gt{constructor(e,t,i,r,s){super(e,t,r,s);this.provider=i,this.authWindow=null,this.pollId=null,$.currentPopupAction&&$.currentPopupAction.cancel(),$.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return d(e,this.auth,"internal-error"),e}async onExecution(){D(this.filter.length===1,"Popup operations only handle one event");let e=mt();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(R(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(R(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$.currentPopupAction=null}pollUserCancellation(){let e=()=>{var t,i;if((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0?void 0:i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(R(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,as.get())};e()}};$.currentPopupAction=null;var os="pendingRedirect",Ke=new Map,qn=class extends gt{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i);this.eventId=null}async execute(){let e=Ke.get(this.auth._key());if(!e){try{let i=await cs(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ke.set(this.auth._key(),e)}return this.bypassAuthState||Ke.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function cs(n,e){let t=ls(e),i=us(n);if(!await i._isAvailable())return!1;let r=await i._get(t)==="true";return await i._remove(t),r}function us(n){return P(n._redirectPersistence)}function ls(n){return be(os,n.config.apiKey,n.name)}async function ds(n,e,t=!1){let i=Ne(n),r=ns(i,e),a=await new qn(i,r,t).execute();return a&&!t&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}var hs=10*60*1e3,Gn=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fs(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Kn(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(R(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hs&&this.cachedEventUids.clear(),this.cachedEventUids.has(pn(e))}saveEventToCache(e){this.cachedEventUids.add(pn(e)),this.lastProcessedEventTime=Date.now()}};function pn(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Kn({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fs(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kn(n);default:return!1}}async function ps(n,e={}){return k(n,"GET","/v1/projects",e)}var ms=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_s=/^https?/;async function gs(n){if(n.config.emulator)return;let{authorizedDomains:e}=await ps(n);for(let t of e)try{if(Is(t))return}catch{}y(n,"unauthorized-domain")}function Is(n){let e=Ye(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===i}if(!_s.test(t))return!1;if(ms.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var vs=new ie(3e4,6e4);function mn(){let n=O().___jsl;if(n==null?void 0:n.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function ys(n){return new Promise((e,t)=>{var i,r,s;function a(){mn(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mn(),t(R(n,"network-request-failed"))},timeout:vs.get()})}if((r=(i=O().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0?void 0:r.Iframe)e(gapi.iframes.getContext());else if((s=O().gapi)===null||s===void 0?void 0:s.load)a();else{let c=$n("iframefcb");return O()[c]=()=>{gapi.load?a():t(R(n,"network-request-failed"))},Zr(`https://apis.google.com/js/api.js?onload=${c}`).catch(o=>t(o))}}).catch(e=>{throw Ae=null,e})}var Ae=null;function Es(n){return Ae=Ae||ys(n),Ae}var Ts=new ie(5e3,15e3),ws="__/auth/iframe",bs="emulator/auth/iframe",As={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ss=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rs(n){let e=n.config;d(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?nt(e,bs):`https://${n.config.authDomain}/${ws}`,i={apiKey:e.apiKey,appName:n.name,v:ue},r=Ss.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${X(i).slice(1)}`}async function Os(n){let e=await Es(n),t=O().gapi;return d(t,n,"internal-error"),e.open({where:document.body,url:Rs(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:As,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});let a=R(n,"network-request-failed"),c=O().setTimeout(()=>{s(a)},Ts.get());function o(){O().clearTimeout(c),r(i)}i.ping(o).then(o,()=>{s(a)})}))}var ks={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ns=500,Ps=600,Ds="_blank",Cs="http://localhost",et=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Ls(n,e,t,i=Ns,r=Ps){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",o=Object.assign(Object.assign({},ks),{width:i.toString(),height:r.toString(),top:s,left:a}),u=g().toLowerCase();t&&(c=Nn(u)?Ds:t),kn(u)&&(e=e||Cs,o.scrollbars="yes");let h=Object.entries(o).reduce((l,[m,I])=>`${l}${m}=${I},`,"");if(_r(u)&&c!=="_self")return Ms(e||"",c),new et(null);let f=window.open(e||"",c,h);d(f,n,"popup-blocked");try{f.focus()}catch{}return new et(f)}function Ms(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var Us="__/auth/handler",Fs="emulator/auth/handler";function _n(n,e,t,i,r,s){d(n.config.authDomain,n,"auth-domain-config-required"),d(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ue,eventId:r};if(e instanceof ct){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",Ot(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[o,u]of Object.entries(s||{}))a[o]=u}if(e instanceof se){let o=e.getScopes().filter(u=>u!=="");o.length>0&&(a.scopes=o.join(","))}n.tenantId&&(a.tid=n.tenantId);let c=a;for(let o of Object.keys(c))c[o]===void 0&&delete c[o];return`${xs(n)}?${X(c).slice(1)}`}function xs({config:n}){return n.emulator?nt(n,Fs):`https://${n.authDomain}/${Us}`}var Je="webStorageSupport",Jn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pt,this._completeRedirectFn=ds}async _openPopup(e,t,i,r){var s;D((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let a=_n(e,t,i,Ye(),r);return Ls(e,a,mt())}async _openRedirect(e,t,i,r){return await this._originValidation(e),jr(_n(e,t,i,Ye(),r)),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(D(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){let t=await Os(e),i=new Gn(e);return t.register("authEvent",r=>(d(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Je,{type:Je},r=>{var s;let a=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Je];a!==void 0&&t(!!a),y(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=gs(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Mn()||ot()||ke()}},Yn=Jn,Xn=class{constructor(e){this.factorId=e}_process(e,t,i){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,i);case"signin":return this._finalizeSignIn(e,t.credential);default:return S("unexpected MultiFactorSessionType")}}},Ce=class extends Xn{constructor(e){super("phone");this.credential=e}static _fromCredential(e){return new Ce(e)}_finalizeEnroll(e,t,i){return Ur(e,{idToken:t,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return Xr(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},It=class{constructor(){}static assertion(e){return Ce._fromCredential(e)}};It.FACTOR_ID="phone";var gn="@firebase/auth",In="0.19.8";var Qn=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{var r;e(((r=i)===null||r===void 0?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){d(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Vs(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Ws(n){ce(new M("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),{apiKey:r,authDomain:s}=i.options;return(a=>{d(r&&!r.includes(":"),"invalid-api-key",{appName:a.name}),d(!(s==null?void 0:s.includes(":")),"argument-error",{appName:a.name});let c={apiKey:r,authDomain:s,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Un(n)},o=new Fn(a,c);return ir(o,t),o})(i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ce(new M("auth-internal",e=>{let t=Ne(e.getProvider("auth").getImmediate());return(i=>new Qn(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),U(gn,In,Vs(n)),U(gn,In,"esm2017")}function Le(n=Ft()){let e=$e(n,"auth");return e.isInitialized()?e.getImmediate():Tn(n,{popupRedirectResolver:Yn,persistence:[zn,Vn,pt]})}Ws("Browser");var js=()=>new Promise((n,e)=>{Ut({apiKey:"AIzaSyCtLctmVtf5LgHJv2y4h5eVx3h6DsM4KRY",authDomain:"forms-server.firebaseapp.com",projectId:"forms-server",storageBucket:"forms-server.appspot.com",messagingSenderId:"265562888456",appId:"1:265562888456:web:0ad6cfe8a44ef7af7234bd"}),n()}),Hs=()=>new Promise((n,e)=>{let t=Le();lt(t,i=>{i?console.info("welcoming now..."+i.email):console.warn("onAuthStateChanged running with no user")}),n()}),Bs=(n,e)=>{let t=Le();ut(t,n,e).catch(i=>{console.error(i.code,i.message)})};(async()=>(await js(),document.getElementById("auth-page")&&(await Hs(),document.getElementById("signup-form").addEventListener("submit",n=>{n.preventDefault();let e=document.getElementById("signup-email").textContent;console.log(e);let t=document.getElementById("signup-pass").textContent;console.info(t),Bs(e,t)}))))();})();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
//# sourceMappingURL=auth.js.map
